config:
  target: 'https://apitest.livquik.com'
  phases:
    - duration: 1
      arrivalRate: 2
      rampTo: 5
  processor: ../helpers/artilleryfaker.js
  defaults:
    headers:
      x-thunder: true
      x-breeze: true
      Content-Type: "application/json"
      Authorization: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9YJVpqqoXhNK6qvn5RQbJE-GX02Zve7vcc9FUKqc0_W0"
      TENANT: "KOTAK_BNPL"
      public-key: "Bearer cGtfbGl2ZV94NjIzRkpNZmFJbmk6c2tfbGl2ZV9xeUVwSUJaQWQxcG1aNk9oMklUOG43UjlmSzFVbmM2aEQ3VGtHSUxy"
      User-Agent: "PostmanRuntime/7.31.1"
  variables:
    merchantOrderId: ''
scenarios:
  - name: Customers positive scenario
    weight: 2
    flow:
      - function:
          - generateFakeData
      - post:
          url: /api/v1/bnpl/processPayment
          json:
             mobileNumber: "9656454343"
             deviceId: "GFHGAFD6765757DFS"
             channel: "app"
             merchantId: "uk@wad7Si"
             amount: 1
             currency: "INR"
             merchantOrderId: 'JHGF7576575'
             callbackUrl: "https://localhost:8000/api/processPayment"
             emiSubvention: false
             emiTransaction: false
             paymentMode: {
             bnpl: [{
             paymentChannelId: "kotak_bnpl_cardless_*"
             }]
             }
             source: "secure-2fr"
          capture:
            - json: $.statusCode
              as: statusCode
            - json: $.message
              as: message
            - json: $.status
              as: status 
            